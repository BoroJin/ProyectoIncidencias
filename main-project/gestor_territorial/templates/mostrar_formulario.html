<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Incidencia</title>
</head>
<body>

<h1>Formulario de Incidencia</h1>

<p>Ubicaci√≥n seleccionada:</p>
<p>Latitud: {{ latitud }}</p>
<p>Longitud: {{ longitud }}</p>

<form action="{% url 'crear_incidencia' %}" method="post">
    {% csrf_token %}
    <input type="hidden" name="lat" value="{{ latitud }}">
    <input type="hidden" name="lng" value="{{ longitud }}">

    {% if formulario %}
        {% for campo in campos %}
            <label for="{{ campo.id }}">{{ campo.nombre }}</label>
            {% if campo.tipo == 'text' %}
                <input type="text" name="{{ campo.id }}" id="{{ campo.id }}">
            {% elif campo.tipo == 'checkbox' %}
                {% for opcion in campo.opciones.all %}
                    <input type="checkbox" name="{{ campo.id }}_{{ opcion.valor }}" id="{{ campo.id }}_{{ opcion.valor }}" value="{{ opcion.valor }}">
                    <label for="{{ campo.id }}_{{ opcion.valor }}">{{ opcion.valor }}</label>
                {% endfor %}
            {% elif campo.tipo == 'select' %}
                <select name="{{ campo.id }}" id="{{ campo.id }}">
                    {% for opcion in campo.opciones.all %}
                        <option value="{{ opcion.valor }}">{{ opcion.valor }}</option>
                    {% endfor %}
                </select>
            {% endif %}
            <br>
        {% endfor %}
    {% else %}
        <p>No hay un formulario activo en este momento.</p>
    {% endif %}

    <button type="submit">Enviar Respuestas</button>
</form>

</body>
</html>
